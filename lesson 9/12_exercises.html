<!DOCTYPE html>
<html>
    <head>
        <title>Lesson 12 Exercises</title>
    </head>

    <body>
        <!--
            1) Create a variable called 'add' and save a function inside. This function will console.log(2+3). Run the function twice.
            2) Create a function runTwice(fn) that takes afunction and runs it twice.
            3) Create a button 'Start' which on click the text inside button changes to 'Finished!'
        
            4) Continuing from qn 3, modify the button so that when we click it, the text immediately changes to 'Loading...' and then after 1 second, it Changes to Finished.
            5) Create the 'Add to cart' button below. When clicking this button, display the message 'Added' below the button. Then, after 2 seconds, remove the message.

            6) Continuing fron qn 5, if we click the button, wait 1 to 1.5 seconds, and then click the button again, notice that the second time, the message disappears very quickly (beacuse the first setTimeout is still running and will make the message disappear very soon)
                Modify the code so that on clicking, it refreshes the second wait time (ie waits for 2 seconds again and removes the message).

            7) Use setInterval() and document.title to create and change the title on every 1 second. (App to (2) New messages and vice versa)
            8) Continuing from qn 7, instead of displaying '(2) New messages' every time, save the number of messages in a variable and determine the title to be displayed. Create 2 buttons 'Add' and 'Remove' that increase / decrease the messages variable by 1
            9) Continuing from qn 8, Don't let messages go below zero, If messages = 0 stop changing the title and display 'App' as title. When messages > 0 start changing the title again.
 
        -->

        <button class="js-start" onclick="txtChange()">Start</button>
        
        <button onclick="addToCart()">Add to cart</button>
        <p class="js-addToCart"></p>

        <button onclick="msg('add')">Add msg</button>
        <button onclick="msg('remove')">Remove msg</button>

        <script>

            // Ans 1

            /*
            const add = function(){
                console.log(2+3)
            }

            add()
            add()

            // Ans 2

            function runTwice(fn){
                fn()
                fn()
            }

            runTwice(function(){
                console.log(12)
            })
            runTwice(add)

            // Ans 3

            function txtChange(){
                setTimeout(function(){
                    document.querySelector('.js-start').innerHTML= 'Finished!'
                },1000)
            }

            /*
            const btn = document.createElement('button')
            btn.innerText = 'Start'
            document.body.appendChild(btn)  */

            // Ans 4

            /*
            function txtChange(){
                document.querySelector('.js-start').innerHTML = 'Loading...'
                setTimeout(function(){
                    document.querySelector('.js-start').innerHTML = 'Finished!'
                },1000)
            }
            
            // Ans 5

            function addToCart(){
                document.querySelector('.js-addToCart').innerHTML = 'Added'

                setTimeout(function(){
                    document.querySelector('.js-addToCart').innerHTML = ''
                },2000)
            }
            */

            // Ans 6

            /* // my version

            let running = false
            let interval_id

            function addToCart(){

                if(!running){
                    running = true
                    document.querySelector('.js-addToCart').innerHTML = 'Added'

                    interval_id = setTimeout(function(){
                        document.querySelector('.js-addToCart').innerHTML = ''
                        console.log('after 2 sec')
                    },2000)
                    
                }else{
                    clearTimeout(interval_id)
                    running = false
                    addToCart()
                }
            }
                */

                // chatgpt version

            /* // Ans 6

            let timeout_id

            function addToCart(){

                document.querySelector('.js-addToCart').innerHTML = 'Added'

                clearTimeout(timeout_id)

                timeout_id = setTimeout(function(){
                    document.querySelector('.js-addToCart').innerHTML = ''
                },2000)

            }
                */

            // Ans 7

            /*
            setInterval(function(){
                if(document.title === 'App'){
                    document.title = '(2) New messages'
                }else{
                    document.title = 'App'
                }
            },1000)
            */

            // Ans 8

            /*
            let msgNo = 0

            function msg(action){
                if(action === 'add'){
                    msgNo++
                }else{
                    msgNo--
                }
            }

            setInterval(function(){
                if(document.title === 'App'){
                    document.title = `(${msgNo}) New messages`
                }else{
                    document.title = 'App'
                }
                
            },1000)
            */

            // Ans 9

            let msgNo = 0

            function msg(action){
                if(action === 'add'){
                    msgNo++
                }else{
                    msgNo--
                }
            }

            setInterval(function(){
                if(msgNo === 0){
                    document.title = 'App'
                }else if(msgNo > 0){
                    if(document.title === 'App'){
                        document.title = `(${msgNo}) New messages`
                    }else{
                        document.title = 'App'
                    }
                }else{
                    return
                }
            },1000)

        </script>
    </body>
</html>